import{UniqueComponentId as t}from"lightvue/utils";import e from"lightvue/utils/DomHandler";function o(t){t.$_lvtooltipModifiers.focus?(alert("focus..."),t.addEventListener("focus",r),t.addEventListener("blur",u)):(t.addEventListener("mouseenter",l),t.addEventListener("mouseleave",n),t.addEventListener("click",d))}function i(t){t.$_lvtooltipModifiers.focus?(t.removeEventListener("focus",r),t.removeEventListener("blur",u)):(t.removeEventListener("mouseenter",l),t.removeEventListener("mouseleave",n),t.removeEventListener("click",d))}function l(t){p(t.currentTarget)}function n(t){s(t.currentTarget)}function r(t){alert("focus"),p(t.currentTarget)}function u(t){alert("blur"),s(t.currentTarget)}function d(t){s(t.currentTarget)}function p(o){if(!o.$_lvtooltipValue)return;let i=function(e){const o=t()+"_tooltip";e.$_lvtooltipId=o;let i=document.createElement("div");i.id=o;let l=document.createElement("div");l.className="lv-tooltip-arrow",i.appendChild(l);let n=document.createElement("div");return n.className="lv-tooltip-text",n.innerHTML=e.$_lvtooltipValue,i.appendChild(n),document.body.appendChild(i),i.style.display="inline-block",i}(o);!function(t){const e=t.$_lvtooltipModifiers;e.top?(g(t),_(t)&&h(t)):e.left?(m(t),_(t)&&(a(t),_(t)&&(g(t),_(t)&&h(t)))):e.bottom?(h(t),_(t)&&g(t)):(a(t),_(t)&&(m(t),_(t)&&(g(t),_(t)&&h(t))))}(o),e.fadeIn(i,250),i.style.zIndex=++e.zindex,window.addEventListener("resize",(function t(){s(o),this.removeEventListener("resize",t)}))}function s(t){c(t)}function f(t){return document.getElementById(t.$_lvtooltipId)}function c(t){if(t){let e=f(t);e&&e.parentElement&&document.body.removeChild(e),t.$_lvtooltipId=null}}function v(t){let o=t.getBoundingClientRect();return{left:o.left+e.getWindowScrollLeft(),top:o.top+e.getWindowScrollTop()}}function a(t){E(t,"right");let o=f(t),i=v(t),l=i.left+e.getOuterWidth(t),n=i.top+(e.getOuterHeight(t)-e.getOuterHeight(o))/2;o.style.left=l+"px",o.style.top=n+"px"}function m(t){E(t,"left");let o=f(t),i=v(t),l=i.left-e.getOuterWidth(o),n=i.top+(e.getOuterHeight(t)-e.getOuterHeight(o))/2;o.style.left=l+"px",o.style.top=n+"px"}function g(t){E(t,"top");let o=f(t),i=v(t),l=i.left+(e.getOuterWidth(t)-e.getOuterWidth(o))/2,n=i.top-e.getOuterHeight(o);o.style.left=l+"px",o.style.top=n+"px"}function h(t){E(t,"bottom");let o=f(t),i=v(t),l=i.left+(e.getOuterWidth(t)-e.getOuterWidth(o))/2,n=i.top+e.getOuterHeight(t);o.style.left=l+"px",o.style.top=n+"px"}function E(t,e){let o=f(t);o.style.left="-999px",o.style.top="-999px",o.className="lv-tooltip lv-component lv-tooltip-"+e}function _(t){let o=f(t),i=o.getBoundingClientRect(),l=i.top,n=i.left,r=e.getOuterWidth(o),u=e.getOuterHeight(o),d=e.getViewport();return n+r>d.width||n<0||l<0||l+u>d.height}const y={bind(t,e){t.$_lvtooltipModifiers=e.modifiers,t.$_lvtooltipValue=e.value,o(t)},unbind(t){c(t),i(t)},update(t,e){t.$_lvtooltipModifiers=e.modifiers,t.$_lvtooltipValue=e.value},mounted(t,e){t.$_lvtooltipModifiers=e.modifiers,t.$_lvtooltipValue=e.value,o(t)},unmounted(t){c(t),i(t)},updated(t,e){t.$_lvtooltipModifiers=e.modifiers,t.$_lvtooltipValue=e.value}};export default y;
