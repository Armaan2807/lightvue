"use strict";var e=require("lightvue/utils/ConnectedOverlayScrollHandler"),t=require("lightvue/utils/DomHandler");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(e),n=i(t);function l(e,t,i,s,n,l,r,o,a,d){"boolean"!=typeof r&&(a=o,o=r,r=!1);const h="function"==typeof i?i.options:i;let c;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,n&&(h.functional=!0)),s&&(h._scopeId=s),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(l)},h._ssrRegister=c):t&&(c=r?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),c)if(h.functional){const e=h.render;h.render=function(t,i){return c.call(i),e(t,i)}}else{const e=h.beforeCreate;h.beforeCreate=e?[].concat(e,c):[c]}return i}const r=l({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"lv-overlaypanel__transition"},on:{enter:e.onEnter,leave:e.onLeave}},[e.visible?i("div",{ref:"overlayRef",staticClass:"lv-overlaypanel lv-component"},[i("div",{staticClass:"lv-overlaypanel__content",on:{click:e.onContentClick}},[e._t("default")],2),e._v(" "),e.showCloseIcon?i("LvButton",{class:{"lv-overlaypanel__close-btn":!0,"--right-align":e.alignRight},attrs:{icon:"light-icon-x",rounded:"","aria-label":e.ariaCloseLabel,type:"button"},on:{click:e.hide}}):e._e()],1):e._e()])},staticRenderFns:[]},undefined,{name:"LvOverlaypanel",props:{dismissable:{type:Boolean,default:!0},showCloseIcon:{type:Boolean,default:!1},appendTo:{type:String,default:null},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},alignRight:{type:Boolean,default:!1},closeOnResize:{type:Boolean,default:!1}},data:()=>({visible:!1}),selfClick:!1,target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,beforeDestroy(){this.onBeforeUnmount()},beforeUnmount(){this.onBeforeUnmount()},methods:{toggle(e,t){let i=e?e.currentTarget:t;console.log(i),this.visible?this.hide():this.show(i)},show(e){this.visible=!0,this.target=e},hide(){this.visible=!1},onContentClick(){this.selfClick=!0},onEnter(){this.appendContainer(),this.alignOverlay(),this.dismissable&&this.bindOutsideClickListener(),this.closeOnResize&&(this.bindScrollListener(),this.bindResizeListener()),this.autoZIndex&&(this.$refs.overlayRef.style.zIndex=String(this.baseZIndex+n.default.generateZIndex()))},onLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},alignOverlay(){n.default.absolutePosition(this.$refs.overlayRef,this.target);const e=n.default.getOffset(this.$refs.overlayRef),t=n.default.getOffset(this.target);let i=0;if(e.left<t.left&&(i=t.left-e.left),this.$refs.overlayRef.style.setProperty("--overlay-arrow-left",`${i}px`),this.$refs.overlayRef.style.setProperty("--overlay-arrow-pos","calc(var(--overlay-arrow-left, 0) + 1.25rem)"),e.top<t.top&&n.default.addClass(this.$refs.overlayRef,"--flipped"),this.alignRight){let e=this.target.getBoundingClientRect().right-this.target.getBoundingClientRect().left,i=this.$refs.overlayRef.getBoundingClientRect().right-this.$refs.overlayRef.getBoundingClientRect().left;this.$refs.overlayRef.style.left=t.left-(i-e)+"px",this.$refs.overlayRef.style.setProperty("--overlay-arrow-pos","calc(100% - 40px)")}},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{!this.visible||this.selfClick||this.isTargetClicked(e)||(this.visible=!1),this.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new s.default(this.target,(()=>{this.visible&&(this.visible=!1)}))),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.visible&&(this.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked(){return this.target&&(this.target===event.target||this.target.contains(event.target))},appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.$refs.overlayRef):document.getElementById(this.appendTo).appendChild(this.$refs.overlayRef))},restoreAppend(){this.$refs.overlayRef&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.$refs.overlayRef):document.getElementById(this.appendTo).removeChild(this.$refs.overlayRef))},onBeforeUnmount(){this.restoreAppend(),this.dismissable&&this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.target=null,this.$refs.overlayRef=null}}},undefined,false,"data-v-c8ed5dfe",!1,void 0,void 0,void 0);module.exports=r;
